<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Summernote Editor</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Summernote CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs5.min.css"
      rel="stylesheet"
    />

    <style>
      body {
        margin: 0;
        padding: 16px;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          sans-serif;
        background: #ffffff;
      }

      .editor-container {
        height: calc(100vh - 32px);
        display: flex;
        flex-direction: column;
      }

      .note-editor {
        border: none !important;
        box-shadow: none !important;
        border-radius: 8px !important;
        overflow: hidden;
      }

      .note-toolbar {
        background: #f8fafc !important;
        border-bottom: 1px solid #e2e8f0 !important;
        padding: 8px 12px !important;
      }

      .note-editing-area {
        background: white;
      }

      .note-editable {
        min-height: 400px !important;
        padding: 16px !important;
        font-size: 14px !important;
        line-height: 1.6 !important;
        color: #1e293b !important;
        border: none !important;
        outline: none !important;
      }

      .note-editable:focus {
        outline: none !important;
      }

      .note-btn {
        border: none !important;
        border-radius: 4px !important;
        margin: 1px !important;
        background: transparent !important;
        color: #475569 !important;
      }

      .note-btn:hover {
        background: #e2e8f0 !important;
        color: #1e293b !important;
      }

      .note-btn.active {
        background: #2563eb !important;
        color: white !important;
      }

      .dropdown-menu {
        border: 1px solid #e2e8f0 !important;
        border-radius: 6px !important;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
      }

      .dropdown-item:hover {
        background: #f1f5f9 !important;
      }

      /* Hide some toolbar items for minimal setup */
      .note-btn-group.note-table,
      .note-btn-group.note-insert,
      .note-btn-group.note-view,
      .note-color,
      .note-para {
        display: none !important;
      }
    </style>
  </head>
  <body>
    <div class="editor-container">
      <div id="summernote"></div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Summernote JS -->
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs5.min.js"></script>

    <script>
      $(document).ready(function () {
        $("#summernote").summernote({
          height: "calc(100vh - 120px)",
          minHeight: 300,
          placeholder: "Start typing...",
          focus: true,
          toolbar: [
            ["style", ["style"]],
            ["font", ["bold", "italic", "underline", "clear"]],
            ["fontsize", ["fontsize"]],
            ["para", ["ul", "ol", "paragraph"]],
            ["height", ["height"]],
            ["misc", ["undo", "redo"]],
          ],
          fontSizes: [
            "8",
            "9",
            "10",
            "11",
            "12",
            "14",
            "16",
            "18",
            "20",
            "22",
            "24",
            "28",
            "32",
            "36",
          ],
          callbacks: {
            onChange: function (contents, $editable) {
              // Notify Flutter about content changes
              if (window.flutter_inappwebview) {
                window.flutter_inappwebview.callHandler(
                  "contentChanged",
                  contents
                );
              }
            },
            onInit: function () {
              // Notify Flutter that editor is ready
              if (window.flutter_inappwebview) {
                window.flutter_inappwebview.callHandler("editorReady");
              }
            },
          },
        });

        // Global functions for Flutter integration
        window.getContent = function () {
          return $("#summernote").summernote("code");
        };

        window.setContent = function (content) {
          $("#summernote").summernote("code", content);
        };

        window.clearContent = function () {
          $("#summernote").summernote("reset");
        };

        window.execCommand = function (command) {
          try {
            switch (command) {
              case "bold":
                $("#summernote").summernote("bold");
                break;
              case "italic":
                $("#summernote").summernote("italic");
                break;
              case "underline":
                $("#summernote").summernote("underline");
                break;
              case "insertUnorderedList":
                $("#summernote").summernote("insertUnorderedList");
                break;
              case "insertOrderedList":
                $("#summernote").summernote("insertOrderedList");
                break;
              default:
                console.log("Unknown command:", command);
            }
          } catch (error) {
            console.error("Error executing command:", error);
          }
        };

        window.insertText = function (text) {
          $("#summernote").summernote("insertText", text);
        };
      });
    </script>
  </body>
</html>
